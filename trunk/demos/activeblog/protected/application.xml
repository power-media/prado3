<?xml version="1.0" encoding="utf-8"?>

<!--<application id="activeblog" Mode="Off">-->
<application id="activeblog" Mode="Debug">
<!--<application id="activeblog" Mode="Normal">-->
<!--<application id="activeblog" Mode="Performance">-->
 	<paths>
 		<!-- System Namespaces -->
 		<using namespace="System.Util.TVarDumper" />
 		<using namespace="System.Web.UI.ActiveControls.*" />
 		<using namespace="System.Data.ActiveRecord.*" />
 		
 		<!-- Application Namespaces -->
 		<using namespace="Application.App_Controls.BlogException"/>
 		<using namespace="Application.App_Controls.*"/>
 		<using namespace="Application.App_Modules.*"/>
 		<using namespace="Application.App_Portlets.*"/>
 		<using namespace="Application.App_Services.*"/>
 	</paths>

 	<module class="System.Util.TParameterModule" ParameterFile="Application.Data.Settings" />
 	
 	<!-- modules configured and loaded for all services -->
  	<modules>
  		<!-- use TUrlMapping to map URL patterns to particular requests -->
    	<module id="friendly-url" class="System.Web.TUrlMapping" ConfigFile="Application.urlmaps"/>
  		<module 
  			id="request" 
  			class="System.Web.THttpRequest" 
  			UrlFormat="Path" 
  			EnableCookieValidation="True"
  			UrlManager="friendly-url"/>

		<module id="ErrorHandler" class="Application.App_Modules.BlogErrorHandler" />
		
		<!-- Custom Session Module -->
    	<module 
    		id="session" 
    		class="System.Web.THttpSession" 
    		AutoStart="True"
    		UseCustomStorage="True" />
  			
  		<!-- user manager module -->
		
    	<!-- auth manager module -->
  			
  		<!-- Modules for caching -->
<!--    	<module id="SqliteCache" PrimaryCache="True" class="System.Caching.TSqliteCache"/>-->

  	</modules>
  	
  	<services>
  		<!-- Our main page service -->
    	<service id="page" class="System.Web.Services.TPageService" BasePath="Application.App_Pages">
    		<modules>
    			<!-- Log module -->
    			<module id="log" class="System.Util.TLogRouter">
<!--      				<route class="TBrowserLogRoute"/>-->
<!--      				<route class="TBrowserLogRoute" Categories="System.Web.UI.TPage"/>-->
      				<route 
      					class="TFileLogRoute" 
      					LogFile="System.log" 
      					Categories="System" 
      					Levels="Notice,Warning,Error,Alert,Fatal"/>
      				<route 
      					class="TFileLogRoute" 
      					LogFile="Application.log" 
      					Categories="Application" 
      					Levels="Info,Notice,Warning,Error,Alert,Fatal"/>
      				<route 
      					class="TFileLogRoute" 
      					LogFile="BlogApplication.log" 
      					Categories="BlogApplication" />
				</module>
				
				<!-- Theme manager module -->
    			<module id="themes" class="System.Web.UI.TThemeManager" />
    			
    			<!-- Data Module -->
    			<module id="data" class="Application.App_Modules.BlogDataModule" />
			</modules>
			
			<pages MasterClass="Application.App_Layouts.MainLayout" Theme="Default" />
		</service>
  	</services>
</application>